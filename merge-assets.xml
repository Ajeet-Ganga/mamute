<project name="brutal" default="merge-all" basedir="./">

	<property name="webapp.dir" value="src/main/webapp" />
	<property name="css.dir" value="${webapp.dir}/css" />
	<property name="js.dir" value="${webapp.dir}/js" />
	<property name="js.deps.dir" value="${js.dir}/deps/" />

	<target name="merge-all">
		<antcall target="merge-css" />
		<antcall target="merge-js" />
		<antcall target="merge-jquery-plugins" />
	</target>

	<target name="merge-css" depends="">
		<echo message="Juntando css's..." />
		<delete file="${css.dir}/all.css" />
		<concat destfile="${css.dir}/all.css">
			<fileset file="${css.dir}/reset.css" />
			<fileset file="${css.dir}/deps/*.css"/>
			<fileset file="${css.dir}/deps/pickadate/*.css" />
			<fileset file="${css.dir}/brutal.css" />
			<fileset file="${css.dir}/responsive-brutal.css" />

		</concat>
		<mkdir dir="${webapp.dir}/font" />
		<copy todir="${webapp.dir}/font">
			<fileset dir="${webapp.dir}/css/font" includes="**" />
		</copy>
	</target>

	<target name="merge-js" depends="">
		<echo message="Juntando js's..." />
		<delete file="${js.dir}/all.js" />
		<concat destfile="${js.dir}/all.js">
			<fileset file="${js.deps.dir}/prettify.js"/>

			<fileset file="${js.deps.dir}/Markdown.Converter.js"/>
			<fileset file="${js.deps.dir}/Markdown.Sanitizer.js"/>
			<fileset file="${js.deps.dir}/Markdown.Editor.js"/>
			<fileset file="${js.deps.dir}/marked.js"/>

			<fileset file="${js.deps.dir}/filepicker.js"/>
			<fileset file="${js.deps.dir}/feather.js"/>

			<fileset dir="${js.dir}" includes="/*.js" excludes="/mediakit-plugin.js, /mediakit.js" />
			
		</concat>
	</target>
	
	<target name="merge-jquery-plugins" depends="">
		<echo message="Juntando jquery plugins..." />
		<mkdir dir="${js.dir}/jquery/"/>
		<delete>
			<fileset file="${js.dir}/jquery/jquery-plugins*.js" />
		</delete>
		<concat fixlastline="yes" destfile="${js.dir}/jquery/jquery-plugins${deploy.timestamp}.js">
			<fileset file="${js.deps.dir}/picker.js"/>			
			<fileset file="${js.deps.dir}/picker.date.js"/>		
			<fileset file="${js.deps.dir}/translations/pt_BR.js"/>
			<fileset file="${js.deps.dir}/jquery.validate.min.js"/>
			<fileset file="${js.deps.dir}/jquery.joyride-2.0.3.js"/>
			<fileset file="${js.deps.dir}/diff_match_patch.js"/>
			<fileset file="${js.deps.dir}/pretty-text-diff.js"/>
		</concat>
	</target>


</project>